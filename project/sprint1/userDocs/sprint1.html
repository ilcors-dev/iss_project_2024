<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-java.min.js"></script>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.tailwindcss.com?plugins=typography,aspect-ratio,line-clamp,container-queries"></script>

<style>
    h1 {
        background-color: #b2c0ff;
        border: 1.5px solid black;
        padding-left: 2px;
        padding-right: 2px;
    }

    h2 {
        background-color: #9ed8ff;
        border: 1.5px solid black;
        padding-left: 10px;
        padding-right: 10px;
    }

    h3 {
        background-color: #e6ccff;
        border: 1.5px solid black;
        padding-left: 10px;
        padding-right: 10px;
    }

    h4 {
        background-color: #ccffcc;
        border: 1.5px solid black;
        padding-left: 10px;
        padding-right: 10px;
    }

    h5 {
        background-color: #d5ffb0;
        border: 1.5px solid black;
        padding-left: 10px;
        padding-right: 10px;
    }

    .blue {
        color: blue;
        font-weight: 500;
    }

    .red {
        color: red;
        font-weight: 500;
    }

    div.remark {
        background-color: #e3f2fd;
        border: 1.5px solid black;
        padding: 15px;
        margin-top: 20px;
        margin-bottom: 20px;
    }

    div.remark-light {
        background-color: #f0ffff;
        border: 1.5px solid black;
        padding: 15px;
        margin-top: 20px;
        margin-bottom: 20px;
    }
</style>

<head>
    <title>Sprint1 Corsetti, de Respinis, Sindaco</title>
</head>

<body class="mx-2">
    <main class="prose" style="max-width: 100%">
        <div id="top">
            <h1>TEMA FINALE 2024 SPRINT1</h1>
        </div>

        <div class="body">
            <h2>Introduction</h2>
            <div class="remark">
                Questo documento contiene lo sprint1 del progetto per il tema finale
                del corso.
            </div>

            <h2>Requisiti</h2>

            <div class="remark">
                I requisiti del sistema da creare possono essere trovati in
                <a href="../../html/TemaFinale24.html">TemaFinale24</a>.
            </div>

            <h2>Analisi dei requisiti</h2>
            <div class="remark">
                Per l'analisi dei requisiti si faccia riferimento allo <a href="../../sprint0/userDocs/sprint0_v1.html">Sprint0</a>
                realizzato precedentemente.
            </div>
            


            <h3>Modello del sistema</h3>
            <div class="remark">
                Il modello del sistema per lo sprint1 è raffigurato
                nell'immagine sottostante. <br />
                <a class="reference internal image-reference" href="./immagini/wis24arch.png"><img
                    alt="./immagini/wis24arch.png" class="align-right" src="./immagini/wis24arch.png"
                    style="width: 40%" /></a>
                L'obiettivo dello sprint1 è quello di implementare il movimento 
                dell'<span class="blue">OpRobot</span> nella <span class="red">Service Area</span>, 
                assicurandosi che raggiunga tutte le posizioni descritte nelle UserStory 
                nello <a href="../../sprint0/userDocs/sprint0_v1.html">Sprint0</a>, 
                nell'ordine corretto. <br />
                Di seguito si riportano i principali attori del sistema, le
                interazioni tra di essi ed anche le motivazioni che hanno
                portato a modellare il sistema in questo modo.
                
            </div>

            <div class="remark">
                <h4>Messaggi scambiati</h4>
                <p>
                    Si noti che la formalizzazione degli eventi come (Dispatch, Request,
                    Event) potrebbe cambiare negli Sprint successivi. Questa possibilità
                    è facilitata dall'uso dei QAK forniti dalla software house.
                </p>
                <b>Messaggi inseriti nello Sprint0 </b>(si faccia riferimento allo
                User Doc dello <a href="../../sprint0/userDocs/sprint0_v1.html">Sprint0</a> per ulteriori dettagli):
                <ul>
                    <li>
                        <b><code>Dispatch startIncinerator : startIncinerator(BTIME)</code></b><br />
                        É stato modificato rispetto allo Sprint0. Verrà utilizzato per la
                        configurazione dell'Incinerator negli sviluppi futuri.
                    </li>
                    <li>
                        <b><code>Event burning : burning(START_TIME)</code></b><br />
                    </li>
                    <li>
                        <b><code>Event finishedBurning : finishedBurning(TIME_ELAPSED)</code></b><br />
                    </li>
                    <li>
                        <b><code>Dispatch ashMeasurement : ashMeasurement(L)</code></b><br />
                    </li>
                </ul>
                La software house mette a disposizione i seguenti messaggi per implementare i <b>movimenti del BasicRobot</b>:<br />
                (Si veda la pagina <a href="../../html/BasicRobot24.html">QakActors24</a> per ulteriori dettagli)
                <ul>
                    <li>
                        <b><code>Request engage : engage(OWNER,STEPTIME)</code></b><br />
                    </li>
                    <li>
                        <b><code>Reply engagedone : engagedone(ARG)</code></b><br />
                    </li>
                    <li>
                        <b><code>Reply engagerefused : engagerefused(ARG)</code></b><br />
                    </li>
                    <li>
                        <b><code>Request moverobot : moverobot(TARGETX, TARGETY)</code></b><br />
                    </li>
                    <li>
                        <b><code>Reply moverobotdone : moverobotok(ARG) for moverobot</code></b><br />
                    </li>
                    <li>
                        <b><code>Reply moverobotfailed : moverobotfailed(PLANDONE, PLANTODO)
                                for moverobot</code></b><br />
                    </li>
                </ul>
                <b>Messaggi aggiunti nello Sprint1: </b>
                <ul>
                    <li>
                        <b><code>Dispatch startBurning : startBurning(BTIME)</code></b><br />
                        Questo messaggio è ricavato dal seguente requisito:
                        <div class="remark-light">
                            <i>" The Incinerator is able to perceive a proper activation
                                command sent by using a wireless (wifi, bluetooth)
                                connection.<br />
                                The Incinerator can process one RP at the time. The burning
                                process requires (approximately) BTIME seconds."</i>
                        </div>
                        È quindi fondamentale per il sistema in quanto indica
                        all'inceneritore che è stato inserito un RP e può iniziare la fase
                        di incenerimento. Il tempo di incenerimento è rappresentato dal
                        parametro <b>BTIME</b>. <br />
                    </li>
                    <br />
                    Le
                    <b>interazioni tra il WIS e l'OpRobot</b>
                    verranno gestite attraverso un'interazione di tipo Request/Reply in
                    quanto la risposta dell'OpRobot potrà essere usata per la gestione
                    della ServiceStatusGUI, che dovrà riportare lo stato del robot:
                    <div class="remark-light">
                        <i>" 4. the state of the OpRobot, i.e. an indication of its
                            current location in the service area and of the job that it is
                            doing.</i>
                    </div>
                    <li>
                        <b><code>Request getrp : getrp(TARGETX, TARGETY)</code></b><br />
                        <b><code>Reply getrp_status : getrp_status(0) for getrp</code></b><br />
                        <div class="remark-light">
                            "2. if the WasteStorage container is not empty, the AshStorage
                            container is not full, and the Incinerator is not in a burning
                            phase, move to the WASTEIN port. If one of the conditions is not
                            true, wait at HOME, until it becomes true.<br />
                            3. get a RP from the WasteStorage container;"
                        </div>
                        I parametri TARGETX e TARGETY contengono le coordinate in cui il
                        robot dovrà dirigersi per svolgere il compito assegnatogli.
                    </li>
                    <li>
                        <b><code>Request depositrp : depositrp(TARGETX, TARGETY)</code></b><br />
                        <b><code>Reply depositrp_status : depositrp_status(0) for
                                depositrp</code></b><br />
                        <div class="remark-light">
                            "4. move to the BURNIN port and deposit the RP into the
                            Incinerator;"
                        </div>
                    </li>
                    <li>
                        <b><code>Request extractash : extractash(TARGETX, TARGETY)</code></b><br />
                        <b><code>Reply extractash_status : extractash_status(0) for
                                extractash</code></b><br />
                        <div class="remark-light">
                            "6. move to the BURNOUT port to extract the ash, when the
                            Incinerator has completed a burning phase;"
                        </div>
                    </li>
                    <li>
                        <b><code>Request depositash : depositash(TARGETX, TARGETY)</code></b><br />
                        <b><code>Reply depositash_status : depositash_status(0) for
                                depositash</code></b><br />
                        <div class="remark-light">
                            "7. move to the ASHOUT port and deposit the ash into the
                            AshStorage container;"
                        </div>
                    </li>
                    <li>
                        <b><code>Request gohome : gohome(TARGETX, TARGETY)</code></b><br />
                        <b><code>Reply gohome_status : gohome_status(0) for gohome</code></b><br />
                        <div class="remark-light">
                            "8. reconsider the point 2 (and go back to HOME, if it is the
                            case)."
                        </div>
                    </li>
                </ul>
            </div>
            <h4>Contesti</h4>
            <div class="remark">
                Il linguaggio Qak prevede la definizione di almeno un contesto,
                secondo la sintassi riportata sempre nella pagina
                <a href="../../html/QakActors24.html">QakActors24</a>.<br />
                Ai fini del funzionamento del nostro sistema, si formalizzano 3
                contesti:
                <ul>
                    <li>
                        <span class="blue">ctxwis24</span>: contesto principale
                        dell'applicazione
                    </li>
                    <li>
                        <span class="blue">ctxbasicrobot</span>: il contesto esterno per
                        la comunicazione con il supporto software fornito
                    </li>
                    <li>
                        <span class="blue">ctxmonitoringdevice</span>: il contesto esterno
                        in esecuzione sul RaspberryPi
                    </li>
                </ul>
                <pre>
                    Context ctxwis24 ip [host="localhost" port=8121]
                    Context ctxbasicrobot ip [host="127.0.0.1" port=8020]
                    Context ctxmonitoringdevice ip [host="127.0.0.1" port=8122]
                </pre>
            </div>
            <h4>WIS</h4>
            <div class="remark">
                <div>
                    Il <span class="blue">WIS</span> è modellato come attore (<a href="./../src/wis.qak">wis.qak</a>).
                    Il suo compito in questa fase è quello di mantenere lo stato
                    attuale dell'inceneritore (<span class="red">acceso</span> o
                    <span class="red">spento</span>) e il
                    <span class="red">livello della cenere</span>.
                </div>
                <div>
                    Per questo motivo il <span class="blue">WIS</span> interagirà con
                    gli attori <span class="blue">Incinerator</span> e
                    <span class="blue">MonitoringDevice</span> che saranno descritti
                    nelle sezioni immediatamente successive.<br />
                    In particolare il WIS:
                    <ul>
                        <li>
                            <b>invierà</b> il messaggio
                            <b><code>startIncinerator</code></b> all'<span class="blue">Incinerator</span>
                            per dare il via alla configurazione dell'inceneritore.
                        </li>
                        <li>
                            <b>invierà</b> il messaggio
                            <b><code>startBurning</code></b> all'<span class="blue">Incinerator</span>
                            per dare il via all'incenerimento dell'RP appena inserito.
                        </li>
                        <li>
                            <b>riceverà</b> il messaggio
                            <b><code>burning</code></b> dall'<span class="blue">Incinerator</span>
                            per mantenere aggiornato il proprio stato interno.
                        </li>
                        <li>
                            <b>riceverà</b> il messaggio
                            <b><code>finishedBurning</code></b> dall'<span class="blue">Incinerator</span>
                            per mantenere aggiornato il proprio stato interno.
                        </li>
                        <li>
                            <b>riceverà</b> il messaggio
                            <b><code>ashMeasurement</code></b> dal
                            <span class="blue">MonitoringDevice</span>
                            per mantenere aggiornato il livello delle ceneri.
                        </li>
                        <li>
                            <b>invierà</b> il messaggio <b><code>getrp</code></b> all'<span class="blue">OpRobot</span>
                            per chiedergli di recarsi nella WASTEIN port per ritirare un RP.
                        </li>
                        <li>
                            <b>riceverà</b> il messaggio
                            <b><code>getrp_status</code></b> dal
                            <span class="blue">OpRobot</span>
                            per mantenere aggiornato lo stato dell'OpRobot.
                        </li>
                        <li>
                            <b>invierà</b> il messaggio
                            <b><code>depositrp</code></b> all'<span class="blue">OpRobot</span>
                            per chiedergli di recarsi nella BURNIN port e depositare un RP.
                        </li>
                        <li>
                            <b>riceverà</b> il messaggio
                            <b><code>depositrp_status</code></b> dal
                            <span class="blue">OpRobot</span>
                            per mantenere aggiornato lo stato dell'OpRobot.
                        </li>
                        <li>
                            <b>invierà</b> il messaggio
                            <b><code>extractash</code></b> all'<span class="blue">OpRobot</span>
                            per chiedergli di recarsi nella BURNOUT port e ritirare le
                            ceneri appena prodotte.
                        </li>
                        <li>
                            <b>riceverà</b> il messaggio
                            <b><code>extractash_status</code></b> dal
                            <span class="blue">OpRobot</span>
                            per mantenere aggiornato lo stato dell'OpRobot.
                        </li>
                        <li>
                            <b>invierà</b> il messaggio
                            <b><code>depositash</code></b> all'<span class="blue">OpRobot</span>
                            per chiedergli di recarsi nella ASHIN port e ritirare le ceneri
                            appena prodotte.
                        </li>
                        <li>
                            <b>riceverà</b> il messaggio
                            <b><code>depositash_status</code></b> dal
                            <span class="blue">OpRobot</span>
                            per mantenere aggiornato lo stato dell'OpRobot.
                        </li>
                        <li>
                            <b>invierà</b> il messaggio <b><code>gohome</code></b> all'<span class="blue">OpRobot</span>
                            per chiedergli di recarsi nella HOME.
                        </li>
                        <li>
                            <b>riceverà</b> il messaggio
                            <b><code>gohome_status</code></b> dal
                            <span class="blue">OpRobot</span>
                            per mantenere aggiornato lo stato dell'OpRobot.
                        </li>
                    </ul>
                </div>
            </div>
            <h4>Incinerator</h4>
            <div class="remark">
                L'<span class="blue">incinerator</span> sarà modellato come attore.
                Interagirà con il <span class="blue">WIS</span> per ricevere il
                comando <b><code>startIncinerator</code></b> e
                <b><code>startBurning</code></b> di inizio incenerimento ed emetterà
                gli eventi <b><code>burning</code></b> e
                <b><code>finishedBurning</code></b>.
            </div>

            <h4>MonitoringDevice</h4>
            <div class="remark">
                Il <span class="blue">MonitoringDevice</span> è collocato in un
                contesto esterno rispetto a quello degli altri attori attualmente
                modellati nello sprint0, il suo compito in questa fase è quello di
                simulare la misurazione e l'invio del livello della cenere dall'<span class="blue">AshStorage</span>
                al sistema inviando il messaggio <b><code>ashMeasurement</code></b> al
                <span class="blue">WIS</span>. <br />
                In futuro verrà modellato in dettaglio per essere eseguito su un
                supporto esterno, come il RaspberryPi.
            </div>

            <h4>OpRobot</h4>
            <div class="remark">
                L'<span class="blue">OpRobot</span> sarà modellato come attore.
                Interagirà con il <span class="blue">WIS</span> per ricevere i comandi
                <b><code>getrp</code></b>, <b><code>depositrp</code></b>, <b><code>extractash</code></b>,
                <b><code>depositash</code></b> e <b><code>gohome</code></b> e
                risponderà con <b><code>getrp_status</code></b>, <b><code>depositrp_status</code></b>,
                <b><code>extractash_status</code></b>, <b><code>depositash_status</code></b> e
                <b><code>gohome_status</code></b>, i cui funzionamenti sono stati esplicitati nei paragrafi
                precedenti.
            </div>
        </div>

        <h3>Piani di testing</h3>
        <div class="remark">
            Essendo lo Sprint1 concentrato nel modellare il movimento dell'<span class="blue">OpRobot</span>
            e la sua interazione con il <span class="blue">WIS</span>, i test
            saranno focalizzati su queste due parti del sistema. <br />
            I test fanno uso di un observer e di un POJO "Logger" per salvare i log
            rilevanti durante l'esecuzione in un file testuale. <br />
            Le classi di test, avviano l'intero sistema "wis_test.qak",
            pre-configurato per eseguire un ciclo completo
            "avvio-getrp-incerimento-estrazione_cenere-scarico_cenere" e verificano
            il contenuto del file di log generato. <br />
            <a href="./../src/main/kotlin/Logger.kt">Logger.kt</a>
            <ul>
                <li>
                    <b>testGetRP</b> verifica il corretto recupero del RP dopo aver
                    verificato i requisiti menzionati nello User Stories e lo
                    spostamento verso la <span class="red">BURNIN port</span> in cui
                    verrà depositato il <span class="red">RP</span>.<br />
                    <a href="./../src/main/kotlin/test/TestGetRp.kt">testGetRP.kt</a </li>
                <li>
                    <b>testGetAsh</b> verifica il corretto recupero dalla
                    <span class="red">BURNOUT</span>
                    port dell'Ash prodotta dall'<span class="blue">Incinerator</span>
                    alla fine della sua fase di burning. L'<span class="blue">OpRobot</span>
                    dovrà successivamente dirigersi verso la
                    <span class="red">ASHOUT</span> port dell'AshStorage dove depositerà
                    la cenere.<br />
                    <a href="./../src/main/kotlin/test/TestGetAsh.kt">testGetAsh.kt</a>
                </li>
            </ul>
        </div>
        <h3>Prossimi sviluppi</h3>
        <div class="remark">
            Nel prossimo sprint (<b>Sprint 2</b>) verranno implementati l'estrazione e il deposito di <b>RP</b> e <b>Ash</b>.
            Inoltre si gestirà il <span class="blue">MonitoringDevice</span>. <br />
        </div>

        <h3>Footer</h3>
        <div class="remark">
            Membri del gruppo
            <ul>
                <li>
                    Corsetti Luca -
                    <a href="mailto:luca.corsetti3@studio.unibo.it">luca.corsetti3@studio.unibo.it</a>
                </li>
                <li>
                    de Respinis Valentina
                    <a href="mailto:valentina.derespinis@studio.unibo.it">valentina.derespinis@studio.unibo.it</a>
                </li>
                <li>
                    Sindaco Daniele
                    <a href="mailto:daniele.sindaco@studio.unibo.it">daniele.sindaco@studio.unibo.it</a>
                </li>
            </ul>
        </div>
        <div class="remark">
            github:
            <a
                href="https://github.com/ilcors-dev/iss_project_2024/tree/main">https://github.com/ilcors-dev/iss_project_2024/tree/main</a>
        </div>
    </main>
</body>

</html>
